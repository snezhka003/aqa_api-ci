[![Java CI with Gradle](https://github.com/snezhka003/aqa_api-ci/actions/workflows/gradle.yml/badge.svg)](https://github.com/snezhka003/aqa_api-ci/actions/workflows/gradle.yml)

## –ó–∞–¥–∞—á–∞ 
‚Ññ1: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ CI

–ù–∞–ø–æ–º–∏–Ω–∞–µ–º, CI ‚Äî —ç—Ç–æ —á–∞—â–µ –≤—Å–µ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ ‚Äî —Å–µ—Ä–≤–µ—Ä, –Ω–∞–±–æ—Ä —Å–µ—Ä–≤–µ—Ä–æ–≤, –æ–±–ª–∞–∫–æ ‚Äî –≤ –∫–æ—Ç–æ—Ä–æ–π –≤–∞—à –∫–æ–¥ –∏ –≤–∞—à–∏ –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º —Ä–µ–∂–∏–º–µ –±–µ–∑ –≤–∞—à–µ–≥–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —É—á–∞—Å—Ç–∏—è. –í—ã –ª–∏—à—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç–µ CI –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, push –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, —Å—Ç–∞—Ä—Ç–æ–≤–∞–ª –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –∏ –ø—Ä–æ–≥–æ–Ω–∞ —Ç–µ—Å—Ç–æ–≤.

–î–µ—Ç–∞–ª—å–Ω–µ–µ –ø—Ä–æ CI –≤—ã –º–æ–∂–µ—Ç–µ —É–∑–Ω–∞—Ç—å, –ø–æ–≥—É–≥–ª–∏–≤ ¬´Continuous integration¬ª, ¬´Jenkins¬ª, ¬´GitLab CI¬ª, ¬´AppVeyor¬ª, ¬´Travis¬ª, ¬´CircleCI¬ª, ¬´GitHub Actions¬ª.

–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø–µ—Ä–≤–æ–π –∏ –≤—Ç–æ—Ä–æ–π –∑–∞–¥–∞—á –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏–≤ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ [—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ —É—á–µ–±–Ω–æ–≥–æ –∫–æ–¥–∞](https://github.com/netology-code/aqa-code/tree/master) –≤–æ –≤—Ä–µ–º–µ–Ω–Ω—É—é –ø–∞–ø–∫—É –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–º–ø—å—é—Ç–µ—Ä
2. –ò–∑ –ø–∞–ø–∫–∏ /api-ci/rest –ª–æ–∫–∞–ª—å–Ω–æ–π –∫–æ–ø–∏–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è aqa-code –∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞ —Å —Ä–µ—à–µ–Ω–∏–µ–º –∑–∞–¥–∞—á–∏

**–í–∞–∂–Ω–æ**: –∏–Ω–æ–≥–¥–∞ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CI —Ç–∞–∫, —á—Ç–æ —Ç–∞–º **–≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç success** üòà! –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤ CI —Å–±–æ—Ä–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–∞–¥–∞–µ—Ç, –µ—Å–ª–∏ –≤—ã –∑–∞–ø—É—à–∏—Ç–µ –≤ GitHub –ø–∞–¥–∞—é—â–∏–π —Ç–µ—Å—Ç.

<details>
  <summary>–ü–æ–¥—Å–∫–∞–∑–∫–∞</summary>

–í–æ–∑–º–æ–∂–Ω–æ, —ç—Ç–æ –∫–∞–∫-—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å —Ñ–∞–π–ª–æ–º gradlew –∏ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ –Ω–µ–≥–æ. –î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø—É—Å–∫ —Ñ–∞–π–ª–∞ gradlew, –¥–æ–±–∞–≤—å—Ç–µ –≤ CI –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã `chmod +x gradlew` –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Ñ–∞–π–ª –∫–∞–∫ –∫–æ–º–∞–Ω–¥—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≥—Ä–µ–¥–ª–æ–º.
</details>

–û–±—â–∞—è —Å—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: CI –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç–µ, –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –∏ –≤–∞—à–∏ –∞–≤—Ç–æ—Ç–µ—Å—Ç—ã. –î–ª—è —ç—Ç–æ–≥–æ –º—ã –±—É–¥–µ–º –Ω–∞ —ç—Ç–æ—Ç —Ä–∞–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Bash.

–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–∏—Å, –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö ‚Äî –ø–æ–ª–æ–∂–∏—Ç—å JAR-—Ñ–∞–π–ª –ø—Ä—è–º–æ –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –ö–æ–≥–¥–∞ AppVeyor –±—É–¥–µ—Ç –≤—ã–∫–∞—á–∏–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤, –æ–Ω –≤—ã–∫–∞—á–∞–µ—Ç –∏ –≤–∞—à —Å–µ—Ä–≤–∏—Å.

–ö–æ–Ω–µ—á–Ω–æ, –≤—ã –¥–æ–ª–∂–Ω—ã –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (—Å–æ–±—Ä–∞–Ω–Ω—ã–π —Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–∏—Å) —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö, –∏ –ø—Ä–æ—Ü–µ—Å—Å –≤—ã–∫–∞—á–∏–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Ç–æ–≥–æ, –≥–¥–µ –∏ –∫–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—Å—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç.

–í–∞—à —Ü–µ–ª–µ–≤–æ–π —Å–µ—Ä–≤–∏—Å (SUT ‚Äî System under test), —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω –≤ —Ñ–∞–π–ª–µ [app-mbank.jar](app-mbank.jar), —ç—Ç–æ—Ç –∂–µ —Ñ–∞–π–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –Ω–∞ –ª–µ–∫—Ü–∏–∏. –í–∞–º –Ω—É–∂–Ω–æ –µ–≥–æ –ø–æ–ª–æ–∂–∏—Ç—å –≤ –∫–∞—Ç–∞–ª–æ–≥ `artifacts` –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å.

–ü–æ—Å–∫–æ–ª—å–∫—É —Ñ–∞–π–ª—ã —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `.jar` –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–ø–∏—Å–∫–∞—Ö `.gitignore`, –≤–∞–º –Ω—É–∂–Ω–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç—å Git —Å–ª–µ–¥–∏—Ç—å –∑–∞ –Ω–∏–º–∏: `git add -f artifacts/app-mbank.jar`.

–ü–æ—Å–ª–µ —á–µ–≥–æ —Å–¥–µ–ª–∞—Ç—å `git push`. –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –ø–æ–ø–∞–ª –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.

## –ó–∞–¥–∞—á–∞ ‚Ññ2: JSON Schema

JSON Schema –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –Ω–∞–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON-–¥–æ–∫—É–º–µ–Ω—Ç–æ–≤. –° –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è –ø–æ [–∞–¥—Ä–µ—Å—É](https://json-schema.org/understanding-json-schema).

–ö–∞–∫ —Å—Ç—Ä–æ–∏—Ç—Å—è —Å—Ö–µ–º–∞:
```js
{
  "$schema": "http://json-schema.org/draft-07/schema", // –≤–µ—Ä—Å–∏—è —Å—Ö–µ–º—ã: https://json-schema.org/understanding-json-schema/reference/schema.html
  "type": "array", // —Ç–∏–ø –∫–æ—Ä–Ω–µ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞: https://json-schema.org/understanding-json-schema/reference/type.html
  "items": { // –∫–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ–ø—É—Å—Ç–∏–º—ã –≤–Ω—É—Ç—Ä–∏ –º–∞—Å—Å–∏–≤–∞: https://json-schema.org/understanding-json-schema/reference/array.html#items
    "type": "object", // –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—ä–µ–∫—Ç–∞–º–∏: https://json-schema.org/understanding-json-schema/reference/object.html
    "required": [ // –¥–æ–ª–∂–Ω—ã —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–ª—è: https://json-schema.org/understanding-json-schema/reference/object.html#required-properties
      "id",
      "name",
      "number",
      "balance",
      "currency"
    ],
    "additionalProperties": false, // –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ 
    "properties": { // –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π: https://json-schema.org/understanding-json-schema/reference/object.html#properties
      "id": {
        "type": "integer" // —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ: https://json-schema.org/understanding-json-schema/reference/numeric.html#integer
      },
      "name": {
        "type": "string", // —Å—Ç—Ä–æ–∫–∞: https://json-schema.org/understanding-json-schema/reference/string.html
        "minLength": 1 // –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ ‚Äî 1: https://json-schema.org/understanding-json-schema/reference/string.html#length
      },
      "number": {
        "type": "string", // —Å—Ç—Ä–æ–∫–∞: https://json-schema.org/understanding-json-schema/reference/string.html
        "pattern": "^‚Ä¢‚Ä¢ \\d{4}$" // —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é: https://json-schema.org/understanding-json-schema/reference/string.html#regular-expressions
      },
      "balance": {
        "type": "integer" // —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ: https://json-schema.org/understanding-json-schema/reference/numeric.html#integer
      },
      "currency": {
        "type": "string" // —Å—Ç—Ä–æ–∫–∞: https://json-schema.org/understanding-json-schema/reference/string.html
      }
    }
  }
}
```

–ù–∞—á–Ω–µ–º —Å –∏–∑—É—á–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∏–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —É—Å–ª–æ–≤–∏—è –¥–ª—è –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏.

–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:

#### –®–∞–≥ 1. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞

```groovy
dependencies {
    testImplementation 'io.rest-assured:rest-assured:5.5.0'
    testImplementation 'io.rest-assured:json-schema-validator:5.5.0'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.2'
}
```

#### –®–∞–≥ 2. JSON —Å—Ö–µ–º–∞

–í –∫–∞—Ç–∞–ª–æ–≥–µ `resources` –≤ `src/test` –∏ –¥–æ–ª–∂–µ–Ω –ª–µ–∂–∞—Ç—å —Ñ–∞–π–ª —Å—Ö–µ–º—ã.

![](pic/schema.png)

#### –®–∞–≥ 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å–≤–∏–µ —Å—Ö–µ–º–µ

–û–¥–∏–Ω –∏–∑ –∫–ª–∞—Å—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –æ—Ç–≤–µ—Ç–∞ —Å—Ö–µ–º–µ.

```java
      // –∫–æ–¥ —Ç–µ—Å—Ç–∞
      .then()
          .statusCode(200)
          .body(matchesJsonSchemaInClasspath("accounts.schema.json"));
```

–í —Ç–µ—Å—Ç–æ–≤–æ–º –∫–ª–∞—Å—Å–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∏–º–ø–æ—Ä—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –º–µ—Ç–æ–¥–∞

```java
import static io.restassured.module.jsv.JsonSchemaValidator.matchesJsonSchemaInClasspath;
```

–£–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ –æ—Ç–≤–µ—Ç–∞ —Å—Ö–µ–º–µ –∏ –ø–∞–¥–∞—é—Ç, –µ—Å–ª–∏ –≤—ã –ø–æ–º–µ–Ω—è–µ—Ç–µ —á—Ç–æ-—Ç–æ –≤ —Å—Ö–µ–º–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∏–ø –¥–ª—è `id`.

#### –®–∞–≥ 4. –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ö–µ–º—É

–ò–∑—É—á–∏—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –Ω–∞ —Ç–∏–ø [`object`](https://json-schema.org/understanding-json-schema/reference/object.html) –∏ –Ω–∞–π–¥–∏—Ç–µ —Å–ø–æ—Å–æ–± –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª—è –Ω–∞ –¥–≤–∞ –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π: ¬´RUB¬ª –∏–ª–∏ ¬´USD¬ª.

–î–æ—Ä–∞–±–æ—Ç–∞–π—Ç–µ —Å—Ö–µ–º—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º, —É–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç, –≤ —Ç–æ–º —á–∏—Å–ª–µ –≤ CI.

–ü–æ–º–µ–Ω—è–π—Ç–µ ¬´RUB¬ª –Ω–∞ ¬´RUR¬ª –≤ —Å—Ö–µ–º–µ –∏ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç, –≤ —Ç–æ–º —á–∏—Å–ª–µ –≤ CI.

–ü—Ä–∏—à–ª–∏—Ç–µ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –£–¥–æ—Å—Ç–æ–≤–µ—Ä—å—Ç–µ—Å—å, —á—Ç–æ –≤ –∏—Å—Ç–æ—Ä–∏–∏ —Å–±–æ—Ä–∫–∏ –±—ã–ª–∏ –∫–∞–∫ success, —Ç–∞–∫ –∏ fail, –∏–Ω–∞—á–µ –±—É–¥–µ—Ç –Ω–µ –≤–∏–¥–Ω–æ, –∫–∞–∫ –≤—ã –ø—Ä–æ–≤–µ—Ä—è–ª–∏, —á—Ç–æ —Å–±–æ—Ä–∫–∞ –ø–∞–¥–∞–µ—Ç –≤ CI.